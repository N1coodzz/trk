<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Plinko Demo Oyun - Bonus Kazan</title>
  <style>
    body {
      margin: 0; padding: 0;
      background: url('preland.png') no-repeat center center fixed;
      background-size: cover;
      font-family: Arial, sans-serif;
      color: #fff;
      overflow-x: hidden;
    }
    #game { max-width: 340px; margin: 0 auto; padding-top: 18px;}
    #score { font-size: 1.2em; margin-bottom: 10px; letter-spacing: 1px;}
    #start-btn {
      width: 90%; margin: 22px auto 10px auto; display: block; font-size: 1em;
      padding: 12px; border: none; border-radius: 10px; background: #29b6f6; color: #222; font-weight: bold; box-shadow: 0 0 13px #29b6f6;
      transition: background .2s;
    }
    #start-btn:active { background: #1976d2; }
    #board { position: relative; height: 300px; margin-bottom: 10px; background: transparent; overflow: hidden;}
    .peg { width: 7px; height: 7px; background: #fff6; border-radius: 50%; position: absolute;}
    .slot { width: 21px; height: 15px; background: #222d; border-radius: 7px; position: absolute; bottom: 0; text-align: center; line-height: 15px; font-weight: bold; font-size:0.82em;}
    .ball { width: 9px; height: 9px; background: #29b6f6; border-radius: 50%; position: absolute; box-shadow: 0 0 5px #29b6f6; z-index: 10; }
    .trail { position:absolute; border-radius:50%; pointer-events:none; opacity:0.10; z-index:2; background: radial-gradient(circle, #3cf 14%, #29b6f6 32%, transparent 90%);}
    #counter {margin-bottom:7px;}
    #marquee, #chatbox {font-size:0.97em;background:#112d48cc;padding:5px 0 3px 0;overflow:hidden;}
    #marquee {white-space:nowrap;}
    #online {padding:5px 0 2px 0;text-align:center;background:#1e314c88;font-size:0.96em;}
    #today {padding-bottom:6px;text-align:center;font-size:0.91em;opacity:.77;}
    #faq-block {background:#15223b99;padding:13px 16px 10px 16px;border-radius:14px;margin:13px 0 0 0;}
    #faq-block h3 {font-size:1.06em;margin:0 0 7px 0;}
    #faq-block ul {margin:0;padding:0 0 0 16px;font-size:0.97em;}
    #faq-block li {margin-bottom:3px;}
    #modal-bg, #exit-bg {
      display: none; position: fixed; left:0; top:0; width:100vw; height:100vh; z-index:99;
      background: rgba(0,0,0,0.63); justify-content: center; align-items: center;
    }
    #modal-content, #exit-content {
      background: #17223b; padding: 32px 16px 22px 16px; border-radius: 18px;
      box-shadow: 0 0 48px #0008; text-align: center; color: #fff; max-width: 88vw; margin: auto;
      font-size: 1.13em;
      animation: popin 0.33s cubic-bezier(.62,2.5,.42,.84);
    }
    @keyframes popin {
      0% {transform: scale(0.85); opacity: 0;}
      70% {transform: scale(1.05);}
      100% {transform: scale(1); opacity: 1;}
    }
    #collect-btn, #exit-btn {
      margin-top: 18px; padding: 14px 0; border-radius: 12px; border:none;
      width: 100%; max-width: 220px; font-size:1.07em;
      background: #ff416c; color: #fff; font-weight: bold; box-shadow: 0 0 15px #ff416c;
      cursor: pointer; transition: background 0.19s;
    }
    #collect-btn:active, #exit-btn:active { background: #d9003c;}
    #timer {font-size:1.06em;color:#ffd24e;font-weight:bold;margin:12px 0;}
    /* –°–∞–ª—é—Ç */
    #confetti {pointer-events:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:120;display:none;}
    /* –ß–∞—Ç */
    #chatbox {height:32px;overflow:hidden;}
    .chatmsg {margin-bottom:0;animation:slideup 0.8s linear;}
    @keyframes slideup {0%{opacity:0;transform:translateY(24px);}100%{opacity:1;transform:translateY(0);}}
    /* –ú–æ–Ω–µ—Ç—ã */
    .coin {position:fixed;top:60%;left:50%;width:30px;height:30px;z-index:120;pointer-events:none;background:url('https://cdn.pixabay.com/photo/2017/01/31/13/14/coins-2025622_1280.png') center/cover no-repeat;animation:coindrop 1.1s cubic-bezier(.62,2.5,.42,.84);}
    @keyframes coindrop {
      0%{transform:translate(-50%,-50%) scale(1.5);}
      70%{transform:translate(-100%,-300%) scale(1);}
      100%{transform:translate(350%,-900%) scale(0.7);}
    }
  </style>
</head>
<body>
  <div id="marquee"></div>
  <div id="online"></div>
  <div id="today"></div>
  <div id="chatbox"></div>
  <div id="game">
    <div id="score"><b>Bakiye: DEMO</b></div>
    <div id="board"></div>
    <button id="start-btn">Topu At</button>
    <div id="counter">Kalan top: <span id="balls">15</span></div>
  </div>
  <!-- Modal -->
  <div id="modal-bg">
    <div id="modal-content">
      <div style="font-size:1.16em;margin-bottom:13px;">Kazancƒ±n hazƒ±r! <span style="color:#ffd24e;animation:flash 0.85s infinite alternate;">üéâ</span></div>
      <div id="timer"></div>
      <div style="margin-bottom:9px;"><b>Yalnƒ±zca bug√ºn ge√ßerli!</b><br>Kazancƒ±nƒ± almak i√ßin hemen kaydol:</div>
      <button id="collect-btn">Kazancƒ±nƒ± Al</button>
      <div style="margin-top:16px;opacity:.83;"><small>Bunu ka√ßƒ±rma! S√ºre bitince teklif kaybolur.</small></div>
      <div id="prize-anim"></div>
      <div id="faq-block">
        <h3>Sƒ±k√ßa Sorulan Sorular</h3>
        <ul>
          <li>Bu demo oyundur, ger√ßek bakiye i√ßermez.</li>
          <li>Kazan√ß hemen kayƒ±t sonrasƒ± otomatik aktarƒ±lƒ±r.</li>
          <li>Teklif yalnƒ±zca yeni kullanƒ±cƒ±lar i√ßin ge√ßerlidir.</li>
          <li>G√ºvenli, lisanslƒ± ortaklar tarafƒ±ndan sunulmaktadƒ±r.</li>
        </ul>
      </div>
    </div>
  </div>
  <!-- –í—ã—Ö–æ–¥–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ -->
  <div id="exit-bg">
    <div id="exit-content">
      <div style="font-size:1.16em;margin-bottom:13px;">Ekstra bonus seni bekliyor! <span style="color:#ffd24e;">üéÅ</span></div>
      <div style="margin-bottom:9px;">√áƒ±kmadan √∂nce kaydol, <b>%25 ekstra bonus</b> kap!</div>
      <button id="exit-btn">≈ûimdi Al</button>
    </div>
  </div>
  <!-- –°–∞–ª—é—Ç -->
  <canvas id="confetti"></canvas>
<script>
  // –¢—É—Ä–µ—Ü–∫–∏–µ –∏–º–µ–Ω–∞ –∏ –ø–æ–±–µ–¥—ã –¥–ª—è –º–∞—Ä–∫–µ—Ç–∞
  const demoNames = ["Ahmet","Mehmet","Elif","Ay≈üe","Burak","Fatma","Emir","Yusuf","Zeynep","Mert","Deniz","Kerem","Derya","Seda","Berk","Sinem","Gizem","Umut"];
  const demoPrizes = [13,3,44.5,1.3,13,27,38,25,9,0.7,0.4,1.3,13,3,13,21,31];
  function randArr(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
  function randomWinMsg(){ 
    let name = randArr(demoNames), prize = randArr(demoPrizes);
    return `<b>${name}</b> <span style="color:#ffd24e;">${prize}‚Ç∫</span> kazandƒ±!`;
  }

  // –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞
  function startMarquee() {
    let mq = document.getElementById('marquee');
    let msg = '';
    for(let i=0;i<8;i++) msg += randomWinMsg() + ' &nbsp;&nbsp;&nbsp;';
    mq.innerHTML = `<marquee scrollamount="5">${msg}</marquee>`;
  }
  startMarquee();

  // –û–Ω–ª–∞–π–Ω –∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
  function setOnline() {
    let online = Math.floor(Math.random()*401)+100;
    let today = Math.floor(Math.random()*4001)+1000;
    document.getElementById('online').innerHTML = `<b>≈ûu anda online:</b> ${online} ki≈üi`;
    document.getElementById('today').innerHTML = `<b>Bug√ºn giri≈ü yapanlar:</b> ${today} ki≈üi`;
  }
  setOnline();

  // –ß–∞—Ç —Å –ø–æ–±–µ–¥–∞–º–∏ (–∏–º–∏—Ç–∞—Ü–∏—è)
  function startChat() {
    const chat = document.getElementById('chatbox');
    function addMsg() {
      let div = document.createElement('div');
      div.className = 'chatmsg';
      div.innerHTML = randomWinMsg();
      chat.appendChild(div);
      if(chat.childNodes.length>3) chat.removeChild(chat.childNodes[0]);
    }
    addMsg();
    setInterval(addMsg, 2800 + Math.random()*2000);
  }
  startChat();

  // –û—Ñ—Ñ–µ—Ä –∏ UTM
  const OFFER_URL = 'https://yoursite.com'; // <-- –æ—Ñ—Ñ–µ—Ä-–ª–∏–Ω–∫
  function getUtmParams() {
    let search = window.location.search;
    if (!search) return '';
    let utms = search.match(/utm_\w+=\w+/gi);
    return utms && utms.length ? '?' + utms.join('&') : '';
  }
  const utmQuery = getUtmParams();

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
  function setFinished() { localStorage.setItem('plinko_tr_finished', 'yes'); }
  function isFinished() { return localStorage.getItem('plinko_tr_finished') === 'yes'; }

  function showModal() {
    document.getElementById('modal-bg').style.display = 'flex';
    startTimer();
    launchConfetti();
    launchCoins();
  }
  function hideModal() { document.getElementById('modal-bg').style.display = 'none'; }
  function showExitModal() { document.getElementById('exit-bg').style.display = 'flex'; }
  function hideExitModal() { document.getElementById('exit-bg').style.display = 'none'; }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥
  window.addEventListener('DOMContentLoaded', function() {
    if (isFinished()) {
      document.getElementById('game').style.display = 'none';
      showModal();
    } else {
      drawPegs();
      document.getElementById('game').style.display = '';
      hideModal();
    }
  });

  // Plinko –ª–æ–≥–∏–∫–∞
  const pegRows = 8;
  const pegCols = 9;
  const slots = [13,3,1.3,0.7,0.4,0.7,1.3,3,13];
  let ballsLeft = 15, ballsActive = 0;
  const maxSimultaneousBalls = 5;
  const board = document.getElementById('board');
  let pegsArr = [];

  function drawPegs() {
    board.innerHTML = '';
    pegsArr = [];
    const boardW = board.clientWidth || 280;
    for (let row=0; row<pegRows; row++) {
      for (let col=0; col<=row; col++) {
        let peg = document.createElement('div');
        peg.className = 'peg';
        let left = (boardW/pegCols)*(col + (pegCols-row-1)/2) + 7;
        let top = row*31+14;
        peg.style.left = left + 'px';
        peg.style.top = top + 'px';
        board.appendChild(peg);
        pegsArr.push({x: left+3.5, y: top+3.5});
      }
    }
    for (let i=0;i<slots.length;i++){
      let slot = document.createElement('div');
      slot.className = 'slot';
      let slotLeft = (boardW/pegCols)*i;
      slot.style.left = slotLeft + 'px';
      slot.innerText = slots[i];
      board.appendChild(slot);
    }
  }
  window.addEventListener('resize', drawPegs);

  function launchBall() {
    if (ballsLeft <= 0 || ballsActive >= maxSimultaneousBalls) return;
    ballsActive++;
    let boardW = board.clientWidth || 280;
    let radius = 4.5;
    let x = boardW/2 - radius + (Math.random()-0.5)*5;
    let y = 0;
    let vx = (Math.random()-0.5)*1.0;
    let vy = 0.85 + Math.random()*0.5;

    let ball = document.createElement('div');
    ball.className = 'ball';
    ball.style.left = x+'px';
    ball.style.top = y+'px';
    board.appendChild(ball);

    function drawTrail(px, py) {
      let trail = document.createElement('div');
      trail.className = 'trail';
      trail.style.width = '13px';
      trail.style.height = '13px';
      trail.style.left = (px-2)+'px';
      trail.style.top = (py-2)+'px';
      board.appendChild(trail);
      setTimeout(()=>{ trail.style.opacity = 0; }, 80);
      setTimeout(()=>{ trail.remove(); }, 160);
    }

    let bounceLock = 0;
    let freezeBeforeSink = false;
    function animate() {
      if (freezeBeforeSink) return;
      vy += 0.10;
      x += vx;
      y += vy;
      if (Math.random() > 0.64) drawTrail(x, y);

      for (let peg of pegsArr) {
        let dx = (x+radius) - peg.x;
        let dy = (y+radius) - peg.y;
        let dist = Math.sqrt(dx*dx+dy*dy);
        if (dist < 7.2 && bounceLock === 0) {
          let angle = Math.atan2(dy, dx);
          let speed = Math.sqrt(vx*vx + vy*vy)*0.96 + 0.12;
          let newAngle = angle + (Math.random()-0.5)*0.53;
          vx = Math.cos(newAngle) * speed * 0.92;
          vy = Math.abs(Math.sin(newAngle) * speed) + 0.1;
          bounceLock = 2;
        }
      }
      if (bounceLock > 0) bounceLock--;

      if (x < 0) { x = 0; vx = -vx*0.7;}
      if (x > boardW-9) { x = boardW-9; vx = -vx*0.7;}

      ball.style.left = x+'px';
      ball.style.top = y+'px';

      if (y > 244) {
        freezeBeforeSink = true;
        setTimeout(()=>{
          let slotW = boardW/pegCols;
          let slotNum = Math.floor((x+radius)/slotW);
          if (slotNum<0) slotNum=0;
          if (slotNum>=slots.length) slotNum=slots.length-1;
          let slotCenterX = slotW*slotNum + slotW/2 - radius;
          ball.style.transition = 'top 0.52s cubic-bezier(.68,1.55,.27,.72), left 0.23s cubic-bezier(.43,1.3,.52,.75)';
          ball.style.left = slotCenterX+'px';
          ball.style.top = '266px';
          setTimeout(()=>{
            ballsLeft--;
            if (ballsLeft < 0) ballsLeft = 0;
            document.getElementById('balls').innerText = ballsLeft;
            ball.remove();
            ballsActive--;
            if (ballsLeft==0 && ballsActive==0) endGame();
            if (ballsActive < maxSimultaneousBalls && ballsLeft > 0) {
              document.getElementById('start-btn').disabled = false;
            }
          }, 500);
        }, 110 + Math.random()*60);
        return;
      }
      requestAnimationFrame(animate);
    }
    animate();
    if (ballsActive >= maxSimultaneousBalls) {
      document.getElementById('start-btn').disabled = true;
    }
  }

  document.getElementById('start-btn').onclick = launchBall;

  function endGame() {
    setFinished();
    showModal();
    document.getElementById('game').style.display = 'none';
  }

  // –¢–∞–π–º–µ—Ä 5 –º–∏–Ω—É—Ç (300 —Å–µ–∫)
  let timerInt, timerSec = 300;
  function startTimer(){
    timerSec = 300;
    function updateTimer(){
      let min = Math.floor(timerSec/60), sec = timerSec%60;
      document.getElementById('timer').innerHTML = `<b>Teklif s√ºresi:</b> <span style="color:#ffd24e;">${min}:${sec<10?'0'+sec:sec}</span>`;
      if(timerSec<=0){
        clearInterval(timerInt);
        document.getElementById('timer').innerHTML = "<span style='color:#ff3b5b'>Teklif sona erdi.</span>";
        document.getElementById('collect-btn').disabled = true;
        document.getElementById('collect-btn').style.opacity = .5;
        document.getElementById('collect-btn').innerHTML = "S√ºre Doldu";
      }
      timerSec--;
    }
    updateTimer();
    timerInt = setInterval(updateTimer,1000);
  }

  // –°–∞–ª—é—Ç –∏ –º–æ–Ω–µ—Ç—ã
  function launchConfetti(){
    let canvas = document.getElementById('confetti');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    canvas.style.display = 'block';
    let ctx = canvas.getContext('2d');
    let confs = [];
    for(let i=0;i<120;i++){
      confs.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height*0.7,
        r: 4+Math.random()*6,
        d: Math.random()*Math.PI*2,
        color: `hsl(${Math.random()*360},90%,60%)`,
        s: 2+Math.random()*4
      });
    }
    let frames = 0;
    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      confs.forEach(c=>{
        ctx.beginPath();
        ctx.arc(c.x,c.y,c.r,0,2*Math.PI,false);
        ctx.fillStyle = c.color;
        ctx.globalAlpha = .78;
        ctx.fill();
        ctx.globalAlpha = 1;
        c.y += c.s;
        c.x += Math.sin(c.d + frames/8)*2;
        if(c.y>canvas.height){
          c.y = -10; c.x = Math.random()*canvas.width;
        }
      });
      frames++;
      if(frames<70) requestAnimationFrame(draw);
      else canvas.style.display='none';
    }
    draw();
  }
  function launchCoins(){
    for(let i=0;i<12;i++){
      setTimeout(()=>{
        let coin=document.createElement('div');
        coin.className='coin';
        coin.style.left=(48+Math.random()*4)+'vw';
        document.body.appendChild(coin);
        setTimeout(()=>coin.remove(),1100);
      }, i*110+Math.random()*100);
    }
  }

  // –ö–Ω–æ–ø–∫–∏
  document.getElementById('collect-btn').onclick = function() {
    window.location.href = OFFER_URL + utmQuery;
  };
  document.getElementById('exit-btn').onclick = function() {
    window.location.href = OFFER_URL + utmQuery+'&bonus=ekstra';
  };

  // Exit-intent (–∞–Ω—Ç–∏–±—ç–∫)
  let exitShown = false;
  function showExitPopup(e){
    if(exitShown || isFinished()) return;
    exitShown = true;
    showExitModal();
    e.preventDefault();
    return "";
  }
  window.addEventListener('mouseleave', showExitPopup);
  window.addEventListener('blur', function(){ if(document.activeElement==window) showExitPopup({preventDefault:()=>{}}); });

  // FAQ —É–∂–µ –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏

  // –ù–µ–ª—å–∑—è –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –º–æ–¥–∞–ª–∫–µ
  function lockScroll(){document.body.style.overflow='hidden';}
  function unlockScroll(){document.body.style.overflow='';}
  document.getElementById('modal-bg').addEventListener('mousedown',lockScroll);
  document.getElementById('exit-bg').addEventListener('mousedown',lockScroll);
  document.getElementById('modal-bg').addEventListener('mouseup',unlockScroll);
  document.getElementById('exit-bg').addEventListener('mouseup',unlockScroll);

  setInterval(()=>{
    if (ballsActive < maxSimultaneousBalls && ballsLeft > 0) {
      document.getElementById('start-btn').disabled = false;
    }
    if (ballsLeft < 0) {
      ballsLeft = 0;
      document.getElementById('balls').innerText = 0;
    }
  }, 120);
</script>
</body>
</html>
